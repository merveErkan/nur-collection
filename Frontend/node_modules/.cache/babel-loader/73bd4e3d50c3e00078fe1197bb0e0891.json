{"ast":null,"code":"var _jsxFileName = \"/Users/merveerkan/Desktop/NurCollection/Frontend/src/pages/Orders.js\";\nimport React, { useEffect, useState } from \"react\";\nimport PanelTemplate from \"./PanelTemplate\";\nimport { useNavigate } from \"react-router-dom\";\nfunction Orders() {\n  const navigate = useNavigate();\n  const git = page => {\n    navigate(\"\".concat(page));\n  };\n  const [orders, setOrders] = useState([]);\n  const role = localStorage.getItem(\"role\");\n  let approvedById = null;\n  if (role === \"employee\") {\n    approvedById = localStorage.getItem(\"employee_id\");\n  } else if (role === \"manager\") {\n    approvedById = localStorage.getItem(\"manager_id\");\n  }\n  useEffect(() => {\n    fetch(\"http://localhost:5003/order/pending\").then(res => res.json()).then(data => {\n      if (data.success) setOrders(data.orders);\n    });\n  }, []);\n  const approveOrder = async pendingOrderId => {\n    const role = localStorage.getItem(\"role\"); // EMPLOYEE / MANAGER\n    const userId = localStorage.getItem(\"user_id\");\n    await fetch(\"http://localhost:5003/order/approve/\".concat(pendingOrderId), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        approved_by_id: userId,\n        approved_by_role: role\n      })\n    });\n  };\n  return /*#__PURE__*/React.createElement(PanelTemplate, {\n    title: \"Orders\",\n    rightContent: /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }, orders.length === 0 && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 46\n      }\n    }, \"No pending orders.\"), /*#__PURE__*/React.createElement(\"table\", {\n      border: \"1\",\n      style: {\n        width: \"100%\",\n        marginTop: \"20px\",\n        textAlign: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 33\n      }\n    }, \"Pending Order ID\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 33\n      }\n    }, \"customer ID\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 33\n      }\n    }, \"Order Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 33\n      }\n    }, \"Total Amount\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 25\n      }\n    }, orders.map(order => /*#__PURE__*/React.createElement(\"tr\", {\n      key: order.pending_order_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 37\n      }\n    }, order.pending_order_id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 37\n      }\n    }, order.customer_id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 37\n      }\n    }, order.order_date), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 37\n      }\n    }, order.total_amount), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => approveOrder(order.pending_order_id),\n      style: {\n        backgroundColor: \"#c50b0bff\",\n        color: \"white\",\n        padding: \"8px 20px\",\n        borderRadius: \"8px\",\n        border: \"none\",\n        cursor: \"pointer\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 41\n      }\n    }, \"Onayla\"))))))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  });\n}\nexport default Orders;","map":{"version":3,"names":["React","useEffect","useState","PanelTemplate","useNavigate","Orders","navigate","git","page","concat","orders","setOrders","role","localStorage","getItem","approvedById","fetch","then","res","json","data","success","approveOrder","pendingOrderId","userId","method","headers","body","JSON","stringify","approved_by_id","approved_by_role","createElement","title","rightContent","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","length","border","style","width","marginTop","textAlign","map","order","key","pending_order_id","customer_id","order_date","total_amount","onClick","backgroundColor","color","padding","borderRadius","cursor"],"sources":["/Users/merveerkan/Desktop/NurCollection/Frontend/src/pages/Orders.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PanelTemplate from \"./PanelTemplate\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction Orders() {\n    const navigate = useNavigate();\n    const git = (page) => {\n        navigate(`${page}`)\n    }\n\n    const [orders, setOrders] = useState([]);\n\n    const role = localStorage.getItem(\"role\");\n    let approvedById = null;\n\n    if (role === \"employee\") {\n        approvedById = localStorage.getItem(\"employee_id\");\n    } else if (role === \"manager\") {\n        approvedById = localStorage.getItem(\"manager_id\");\n    }\n\n\n    useEffect(() => {\n        fetch(\"http://localhost:5003/order/pending\")\n            .then(res => res.json())\n            .then(data => {\n                if (data.success)\n                    setOrders(data.orders);\n            });\n    }, []);\n\n\n\n    const approveOrder = async (pendingOrderId) => {\n        const role = localStorage.getItem(\"role\"); // EMPLOYEE / MANAGER\n        const userId = localStorage.getItem(\"user_id\");\n\n        await fetch(`http://localhost:5003/order/approve/${pendingOrderId}`, {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({\n                approved_by_id: userId,\n                approved_by_role: role\n            })\n        });\n    };\n\n\n    return (\n        <PanelTemplate\n            title=\"Orders\"\n            rightContent={\n                <div>\n                    {orders.length === 0 && (<p>No pending orders.</p>)}\n\n                    <table border=\"1\" style={{ width: \"100%\", marginTop: \"20px\", textAlign: \"center\" }}>\n                        <thead>\n                            <tr>\n                                <th>Pending Order ID</th>\n                                <th>customer ID</th>\n                                <th>Order Date</th>\n                                <th>Total Amount</th>\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            {orders.map(order => (\n                                <tr key={order.pending_order_id}>\n                                    <td>{order.pending_order_id}</td>\n                                    <td>{order.customer_id}</td>\n                                    <td>{order.order_date}</td>\n                                    <td>{order.total_amount}</td>\n\n                                    <td>\n                                        <button onClick={() => approveOrder(order.pending_order_id)}\n                                            style={{\n                                                backgroundColor: \"#c50b0bff\",\n                                                color: \"white\",\n                                                padding: \"8px 20px\",\n                                                borderRadius: \"8px\",\n                                                border: \"none\",\n                                                cursor: \"pointer\"\n                                            }}\n                                        >\n                                            Onayla\n                                        </button>\n                                    </td>\n                                </tr>\n\n                            ))}\n                        </tbody>\n                    </table>\n\n                </div >\n            }\n        />\n    );\n}\n\nexport default Orders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}