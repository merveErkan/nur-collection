{"ast":null,"code":"var _jsxFileName = \"/Users/merveerkan/Desktop/NurCollection/Frontend/src/pages/Reports.js\";\nimport React, { useEffect, useState } from \"react\";\nimport PanelTemplate from \"./PanelTemplate\";\nfunction Reports() {\n  const [reportData, setReportData] = useState([]); // Ana tablo verisi\n  const [selectedPerson, setSelectedPerson] = useState(null); // Seçilen kişi\n  const [personDetails, setPersonDetails] = useState([]); // Alt tablo verisi\n\n  // Sayfa açıldığında View'dan verileri çek (Master)\n  useEffect(() => {\n    // API çağrısı: SELECT * FROM v_admin_genel_rapor\n    fetch('/api/admin-general-report').then(res => res.json()).then(data => setReportData(data));\n  }, []);\n  const handlePersonClick = personId => {\n    setSelectedPerson(personId);\n    // API çağrısı: SELECT * FROM Orders WHERE ...\n    fetch(\"/api/person-orders/\".concat(personId)).then(res => res.json()).then(data => setPersonDetails(data));\n  };\n  return /*#__PURE__*/React.createElement(PanelTemplate, {\n    title: \"Reports\",\n    rightContent: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex justify-between items-center mb-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"text-2xl font-bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 25\n      }\n    }, \"Genel \\u0130\\u015Fletme Raporu\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"bg-red-600 text-white px-4 py-2 rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 25\n      }\n    }, \"PDF Olarak \\u0130ndir\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bg-white shadow rounded-lg mb-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"w-full text-left border-collapse\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"bg-gray-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      className: \"p-3 border\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 37\n      }\n    }, \"Ad Soyad\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"p-3 border\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 37\n      }\n    }, \"Rol\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"p-3 border\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 37\n      }\n    }, \"\\u0130\\u015Flem Say\\u0131s\\u0131\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"p-3 border\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 37\n      }\n    }, \"Toplam Ciro\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 29\n      }\n    }, reportData.map(person => /*#__PURE__*/React.createElement(\"tr\", {\n      key: person.person_id,\n      onClick: () => handlePersonClick(person.person_id),\n      className: \"cursor-pointer hover:bg-blue-50 \".concat(selectedPerson === person.person_id ? 'bg-blue-100' : ''),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      className: \"p-3 border\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 41\n      }\n    }, person.ad_soyad), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"p-3 border\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 41\n      }\n    }, person.rol), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"p-3 border\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 41\n      }\n    }, person.islem_sayisi), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"p-3 border\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 41\n      }\n    }, person.toplam_ciro, \" TL\")))))), selectedPerson && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bg-gray-50 p-6 rounded-lg border border-dashed border-gray-300\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"text-xl font-semibold mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 29\n      }\n    }, \"\\u0130\\u015Flem Detaylar\\u0131\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"w-full bg-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 29\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 9\n    }\n  });\n}\n;\nexport default Reports;","map":{"version":3,"names":["React","useEffect","useState","PanelTemplate","Reports","reportData","setReportData","selectedPerson","setSelectedPerson","personDetails","setPersonDetails","fetch","then","res","json","data","handlePersonClick","personId","concat","createElement","title","rightContent","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","person","key","person_id","onClick","ad_soyad","rol","islem_sayisi","toplam_ciro"],"sources":["/Users/merveerkan/Desktop/NurCollection/Frontend/src/pages/Reports.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PanelTemplate from \"./PanelTemplate\";\n\nfunction Reports() {\n\n    const [reportData, setReportData] = useState([]); // Ana tablo verisi\n    const [selectedPerson, setSelectedPerson] = useState(null); // Seçilen kişi\n    const [personDetails, setPersonDetails] = useState([]); // Alt tablo verisi\n\n    // Sayfa açıldığında View'dan verileri çek (Master)\n    useEffect(() => {\n        // API çağrısı: SELECT * FROM v_admin_genel_rapor\n        fetch('/api/admin-general-report')\n            .then(res => res.json())\n            .then(data => setReportData(data));\n    }, []);\n\n    const handlePersonClick = (personId) => {\n        setSelectedPerson(personId);\n        // API çağrısı: SELECT * FROM Orders WHERE ...\n        fetch(`/api/person-orders/${personId}`)\n            .then(res => res.json())\n            .then(data => setPersonDetails(data));\n    };\n    return (\n        <PanelTemplate\n            title=\"Reports\"\n            rightContent={\n                <div className=\"p-8\">\n                    <div className=\"flex justify-between items-center mb-6\">\n                        <h1 className=\"text-2xl font-bold\">Genel İşletme Raporu</h1>\n                        <button className=\"bg-red-600 text-white px-4 py-2 rounded\">\n                            PDF Olarak İndir\n                        </button>\n                    </div>\n\n                    {/* ANA TABLO (MASTER) */}\n                    <div className=\"bg-white shadow rounded-lg mb-8\">\n                        <table className=\"w-full text-left border-collapse\">\n                            <thead className=\"bg-gray-100\">\n                                <tr>\n                                    <th className=\"p-3 border\">Ad Soyad</th>\n                                    <th className=\"p-3 border\">Rol</th>\n                                    <th className=\"p-3 border\">İşlem Sayısı</th>\n                                    <th className=\"p-3 border\">Toplam Ciro</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {reportData.map(person => (\n                                    <tr\n                                        key={person.person_id}\n                                        onClick={() => handlePersonClick(person.person_id)}\n                                        className={`cursor-pointer hover:bg-blue-50 ${selectedPerson === person.person_id ? 'bg-blue-100' : ''}`}\n                                    >\n                                        <td className=\"p-3 border\">{person.ad_soyad}</td>\n                                        <td className=\"p-3 border\">{person.rol}</td>\n                                        <td className=\"p-3 border\">{person.islem_sayisi}</td>\n                                        <td className=\"p-3 border\">{person.toplam_ciro} TL</td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </div>\n\n                    {/* AYRINTI TABLOSU (DETAIL) */}\n                    {selectedPerson && (\n                        <div className=\"bg-gray-50 p-6 rounded-lg border border-dashed border-gray-300\">\n                            <h2 className=\"text-xl font-semibold mb-4\">İşlem Detayları</h2>\n                            <table className=\"w-full bg-white\">\n                                {/* Buraya seçilen kişinin sipariş detayları gelecek */}\n                            </table>\n                        </div>\n                    )}\n                </div>\n            }\n        />\n    );\n};\n\nexport default Reports;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}