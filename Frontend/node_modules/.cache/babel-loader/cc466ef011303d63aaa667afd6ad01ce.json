{"ast":null,"code":"import _objectSpread from \"/Users/merveerkan/Desktop/NurCollection/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/merveerkan/Desktop/NurCollection/Frontend/src/pages/Orders.js\";\nimport React, { useEffect, useState } from \"react\";\nimport PanelTemplate from \"./PanelTemplate\";\nimport { useNavigate } from \"react-router-dom\";\nfunction Orders() {\n  const navigate = useNavigate();\n  const git = page => {\n    navigate(\"\".concat(page));\n  };\n  const [orders, setOrders] = useState([]);\n  const [formData, setFormData] = useState({\n    order_id: \"\",\n    customer_id: \"\",\n    employee_id: \"\",\n    order_date: \"\",\n    total_amount: \"\"\n  });\n  useEffect(() => {\n    fetch(\"http://localhost:5003/order/pending\").then(res => res.json()).then(data => {\n      if (data.success) setOrders(data.orders);\n    });\n  }, []);\n  const handleChange = e => {\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      [e.target.name]: e.target.value\n    }));\n  };\n  const approveOrder = async pendingOrderId => {\n    const employeeId = localStorage.getItem(\"employee_id\");\n    if (!employeeId) {\n      alert(\"Employee ID bulunamadÄ±\");\n      return;\n    }\n    try {\n      const response = await fetch(\"http://localhost:5003/order/approve/\".concat(pendingOrderId), {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          employee_id: employeeId\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        alert(\"SipariÅŸ onaylandÄ±\");\n\n        // ðŸ”¥ ekrandan kaldÄ±r\n        setOrders(prev => prev.filter(o => o.pending_order_id !== pendingOrderId));\n      } else {\n        alert(data.message);\n      }\n    } catch (err) {\n      console.error(\"Approve error:\", err);\n      alert(\"Onay sÄ±rasÄ±nda hata oluÅŸtu\");\n    }\n  };\n  return /*#__PURE__*/React.createElement(PanelTemplate, {\n    title: \"Orders\",\n    rightContent: /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    }, orders.length === 0 && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 46\n      }\n    }, \"No pending orders.\"), /*#__PURE__*/React.createElement(\"table\", {\n      border: \"1\",\n      style: {\n        width: \"100%\",\n        marginTop: \"20px\",\n        textAlign: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 33\n      }\n    }, \"Pending Order ID\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 33\n      }\n    }, \"customer ID\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 33\n      }\n    }, \"Order Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 33\n      }\n    }, \"Total Amount\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    }, orders.map(order => /*#__PURE__*/React.createElement(\"tr\", {\n      key: order.customer_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 37\n      }\n    }, order.pending_order_id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 37\n      }\n    }, order.customer_id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 37\n      }\n    }, order.order_date), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 37\n      }\n    }, order.total_amount), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => approveOrder(order.pending_order_id),\n      style: {\n        backgroundColor: \"#c50b0bff\",\n        color: \"white\",\n        padding: \"8px 20px\",\n        borderRadius: \"8px\",\n        border: \"none\",\n        cursor: \"pointer\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 41\n      }\n    }, \"Onayla\"))))))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  });\n}\nexport default Orders;","map":{"version":3,"names":["React","useEffect","useState","PanelTemplate","useNavigate","Orders","navigate","git","page","concat","orders","setOrders","formData","setFormData","order_id","customer_id","employee_id","order_date","total_amount","fetch","then","res","json","data","success","handleChange","e","_objectSpread","target","name","value","approveOrder","pendingOrderId","employeeId","localStorage","getItem","alert","response","method","headers","body","JSON","stringify","prev","filter","o","pending_order_id","message","err","console","error","createElement","title","rightContent","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","length","border","style","width","marginTop","textAlign","map","order","key","onClick","backgroundColor","color","padding","borderRadius","cursor"],"sources":["/Users/merveerkan/Desktop/NurCollection/Frontend/src/pages/Orders.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PanelTemplate from \"./PanelTemplate\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction Orders() {\n    const navigate = useNavigate();\n    const git = (page) => {\n        navigate(`${page}`)\n    }\n\n    const [orders, setOrders] = useState([]);\n\n    const [formData, setFormData] = useState({\n        order_id: \"\",\n        customer_id: \"\",\n        employee_id: \"\",\n        order_date: \"\",\n        total_amount: \"\"\n    });\n\n    useEffect(() => {\n        fetch(\"http://localhost:5003/order/pending\")\n            .then(res => res.json())\n            .then(data => {\n                if (data.success)\n                    setOrders(data.orders);\n            });\n    }, []);\n\n    const handleChange = (e) => {\n        setFormData({\n            ...formData,\n            [e.target.name]: e.target.value\n        })\n    };\n\n    const approveOrder = async (pendingOrderId) => {\n        const employeeId = localStorage.getItem(\"employee_id\");\n\n        if (!employeeId) {\n            alert(\"Employee ID bulunamadÄ±\");\n            return;\n        }\n\n        try {\n            const response = await fetch(\n                `http://localhost:5003/order/approve/${pendingOrderId}`,\n                {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        employee_id: employeeId\n                    })\n                }\n            );\n\n            const data = await response.json();\n\n            if (data.success) {\n                alert(\"SipariÅŸ onaylandÄ±\");\n\n                // ðŸ”¥ ekrandan kaldÄ±r\n                setOrders(prev =>\n                    prev.filter(o => o.pending_order_id !== pendingOrderId)\n                );\n            } else {\n                alert(data.message);\n            }\n\n        } catch (err) {\n            console.error(\"Approve error:\", err);\n            alert(\"Onay sÄ±rasÄ±nda hata oluÅŸtu\");\n        }\n    };\n\n    return (\n        <PanelTemplate\n            title=\"Orders\"\n            rightContent={\n                <div>\n                    {orders.length === 0 && (<p>No pending orders.</p>)}\n\n                    <table border=\"1\" style={{ width: \"100%\", marginTop: \"20px\", textAlign: \"center\" }}>\n                        <thead>\n                            <tr>\n                                <th>Pending Order ID</th>\n                                <th>customer ID</th>\n                                <th>Order Date</th>\n                                <th>Total Amount</th>\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            {orders.map(order => (\n                                <tr key={order.customer_id}>\n                                    <td>{order.pending_order_id}</td>\n                                    <td>{order.customer_id}</td>\n                                    <td>{order.order_date}</td>\n                                    <td>{order.total_amount}</td>\n\n                                    <td>\n                                        <button onClick={() => approveOrder(order.pending_order_id)}\n                                            style={{\n                                                backgroundColor: \"#c50b0bff\",\n                                                color: \"white\",\n                                                padding: \"8px 20px\",\n                                                borderRadius: \"8px\",\n                                                border: \"none\",\n                                                cursor: \"pointer\"\n                                            }}\n                                        >\n                                            Onayla\n                                        </button>\n                                    </td>\n                                </tr>\n\n                            ))}\n                        </tbody>\n                    </table>\n\n                </div >\n            }\n        />\n    );\n}\n\nexport default Orders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}