{"ast":null,"code":"import _objectSpread from\"/Users/merveerkan/Desktop/NurCollection/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import PanelTemplate from\"./PanelTemplate\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductAdd(){const navigate=useNavigate();const location=window.location;const role=location.pathname.startsWith(\"/manager\")?\"manager\":location.pathname.startsWith(\"/employee\")?\"employee\":\"customer\";const basePath=role===\"manager\"?\"/manager\":role===\"employee\"?\"/employee\":\"/customer\";const git=page=>{navigate(\"\".concat(page));};const[imageUrl,setImageUrl]=useState(\"\");const[formData,setFormData]=useState({category_id:\"\",product_name:\"\",price:\"\",material:\"\",color:\"\",quantity:0,size:\"\",// Scarf\nlengt:\"\",// Shawl\nbody:\"\"// Bonnet\n});const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleFileChange=e=>{const file=e.target.files[0];if(file){const fileName=\"/images/\"+file.name;setImageUrl(fileName);// State'i güncelle\nconsole.log(\"Selected file name:\",fileName);}else{setImageUrl(\"/images/default.png\");}};const handleSubmit=async e=>{e.preventDefault();const payload=_objectSpread(_objectSpread({},formData),{},{image_url:imageUrl});try{const response=await fetch(\"http://localhost:5003/product/insert\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload)});const data=await response.json();alert(data.message);if(data.success){window.location.href=\"\".concat(basePath,\"/productList\");}}catch(error){console.error(\"Error:\",error);alert(\"An error occurred while adding the product.\");}};return/*#__PURE__*/_jsx(PanelTemplate,{title:\"Product Add\",rightContent:/*#__PURE__*/_jsx(\"div\",{className:\"panel button\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{width:\"400px\"},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Catagory\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category_id\",onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Swal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Scarf\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Bonnet\"})]}),/*#__PURE__*/_jsx(\"input\",{name:\"product_name\",type:\"text\",placeholder:\"Product Name\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{name:\"price\",type:\"number\",placeholder:\"Price\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{name:\"material\",type:\"text\",placeholder:\"Material\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{name:\"color\",type:\"text\",placeholder:\"Color\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{name:\"quantity\",type:\"number\",placeholder:\"Quantity\",onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{children:\"Select Product Image:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileChange,style:{marginBottom:\"10px\"}}),imageUrl&&/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"12px\",color:\"gray\"},children:[\"Path to be saved: \",imageUrl]}),formData.category_id===\"2\"&&/*#__PURE__*/_jsx(\"input\",{name:\"size\",type:\"text\",placeholder:\"Size (e.g., 90x90)\",onChange:handleChange}),formData.category_id===\"1\"&&/*#__PURE__*/_jsx(\"input\",{name:\"lengt\",type:\"number\",placeholder:\"Lengt (cm)\",onChange:handleChange}),formData.category_id===\"3\"&&/*#__PURE__*/_jsxs(\"select\",{name:\"body\",onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Body\"}),/*#__PURE__*/_jsx(\"option\",{value:\"L\",children:\"L\"}),/*#__PURE__*/_jsx(\"option\",{value:\"M\",children:\"M\"}),/*#__PURE__*/_jsx(\"option\",{value:\"S\",children:\"S\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Product\"})]})})});}export default ProductAdd;","map":{"version":3,"names":["React","useState","PanelTemplate","useNavigate","jsx","_jsx","jsxs","_jsxs","ProductAdd","navigate","location","window","role","pathname","startsWith","basePath","git","page","concat","imageUrl","setImageUrl","formData","setFormData","category_id","product_name","price","material","color","quantity","size","lengt","body","handleChange","e","_objectSpread","target","name","value","handleFileChange","file","files","fileName","console","log","handleSubmit","preventDefault","payload","image_url","response","fetch","method","headers","JSON","stringify","data","json","alert","message","success","href","error","title","rightContent","className","children","onSubmit","style","width","onChange","type","placeholder","accept","marginBottom","fontSize"],"sources":["/Users/merveerkan/Desktop/NurCollection/Frontend/src/pages/ProductAdd.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport PanelTemplate from \"./PanelTemplate\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction ProductAdd() {\n    const navigate = useNavigate();\n    const location = window.location;\n    const role = location.pathname.startsWith(\"/manager\") ? \"manager\" : location.pathname.startsWith(\"/employee\") ? \"employee\" : \"customer\";\n    const basePath = role === \"manager\" ? \"/manager\" : role === \"employee\" ? \"/employee\" : \"/customer\";\n\n    const git = (page) => {\n        navigate(`${page}`)\n    }\n    const [imageUrl, setImageUrl] = useState(\"\");\n\n    const [formData, setFormData] = useState({\n        category_id: \"\",\n        product_name: \"\",\n        price: \"\",\n        material: \"\",\n        color: \"\",\n        quantity: 0,\n        size: \"\",       // Scarf\n        lengt: \"\",     // Shawl\n        body: \"\"     // Bonnet\n\n    });\n\n    const handleChange = (e) => {\n        setFormData({\n            ...formData,\n            [e.target.name]: e.target.value\n        });\n    };\n\n    const handleFileChange = (e) => {\n        const file = e.target.files[0];\n        if (file) {\n            const fileName = \"/images/\" + file.name;\n            setImageUrl(fileName); // State'i güncelle\n            console.log(\"Selected file name:\", fileName);\n        } else {\n\n            setImageUrl(\"/images/default.png\");\n        }\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        const payload = {\n            ...formData,\n            image_url: imageUrl\n        };\n\n        try {\n            const response = await fetch(\"http://localhost:5003/product/insert\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify(payload),\n            });\n\n            const data = await response.json();\n            alert(data.message);\n\n            if (data.success) {\n                window.location.href = `${basePath}/productList`;\n            }\n        } catch (error) {\n            console.error(\"Error:\", error);\n            alert(\"An error occurred while adding the product.\");\n        }\n    };\n    return (\n        <PanelTemplate\n            title=\"Product Add\"\n            rightContent={\n                <div className=\"panel button\">\n                    <form onSubmit={handleSubmit} style={{ width: \"400px\" }}>\n                        <label>Catagory</label>\n                        <select name=\"category_id\" onChange={handleChange}>\n                            <option value=\"\">Select Category</option>\n                            <option value=\"1\">Swal</option>\n                            <option value=\"2\">Scarf</option>\n                            <option value=\"3\">Bonnet</option>\n                        </select>\n\n                        <input\n                            name=\"product_name\"\n                            type=\"text\"\n                            placeholder=\"Product Name\"\n                            onChange={handleChange}\n                        />\n\n                        <input\n                            name=\"price\"\n                            type=\"number\"\n                            placeholder=\"Price\"\n                            onChange={handleChange}\n                        />\n                        <input\n                            name=\"material\"\n                            type=\"text\"\n                            placeholder=\"Material\"\n                            onChange={handleChange}\n                        />\n                        <input\n                            name=\"color\"\n                            type=\"text\"\n                            placeholder=\"Color\"\n                            onChange={handleChange}\n                        />\n                        <input\n                            name=\"quantity\"\n                            type=\"number\"\n                            placeholder=\"Quantity\"\n                            onChange={handleChange}\n                        />\n                        <label>Select Product Image:</label>\n                        <input\n                            type=\"file\"\n                            accept=\"image/*\"\n                            onChange={handleFileChange}\n                            style={{ marginBottom: \"10px\" }}\n                        />\n                        {imageUrl && <p style={{ fontSize: \"12px\", color: \"gray\" }}>Path to be saved: {imageUrl}</p>}\n\n                        {/* Dynamic Fields */}\n                        {formData.category_id === \"2\" && (\n                            <input\n                                name=\"size\"\n                                type=\"text\"\n                                placeholder=\"Size (e.g., 90x90)\"\n                                onChange={handleChange}\n                            />\n                        )}\n\n                        {formData.category_id === \"1\" && (\n                            <input\n                                name=\"lengt\"\n                                type=\"number\"\n                                placeholder=\"Lengt (cm)\"\n                                onChange={handleChange}\n                            />\n                        )}\n\n                        {formData.category_id === \"3\" && (\n                            <select name=\"body\" onChange={handleChange}>\n                                <option value=\"\">Select Body</option>\n                                <option value=\"L\">L</option>\n                                <option value=\"M\">M</option>\n                                <option value=\"S\">S</option>\n                            </select>\n                        )}\n\n                        <button type=\"submit\">Add Product</button>\n\n                    </form>\n                </div>\n            }\n        />\n    );\n}\n\nexport default ProductAdd;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}